---
title: "revpref"
output: 
  pdf_document:
    citation_package: natbib
author: "Khushboo Surana"
date: "6 April, 2021"
bibliography: "H:/Desktop/reference.bib"
vignette: >
  %\VignetteIndexEntry{revpref}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

The goal of revpref is to provide a set of tools to test whether consumer demand data satisfy a number of revealed preference axioms; compute measures of goodness-of-fit when the data is inconsistent with the axioms; and compute power against uniformly random behavior.

Utility maximization hypothesis @echenique2011money

# Revealed Preference

We assume that the data set consists of $T$ observations of prices and quantities of $N$ consumption categories. Let $p_t = (p^1_t, p^2_t,\cdots,p^N_t) \in \mathbb{R}^N_{++}$ and $q_t = (q^1_t, q^2_t,\cdots,q^N_t) \in \mathbb{R}^N_{+}$ be the vectors of prices and quantities corresponding to observation $t \in \lbrace 1,2,\cdots, T \rbrace$. We assume that all prices are strictly positive and that all quantities are non-negative. The data set $S = \lbrace (p_t,q_t), t = 1,2,\cdots,T \rbrace$ represents the set of observations. 

*Definition 1:* A data set $S = \lbrace (p_t,q_t), t = 1,2,\cdots,T \rbrace$ is rationalizable by a well-behaved utility function $u$ if for each observation $t$
$$ u(q_t) \geq u(q) \text{ for all } q \text{ with } p_t'q \leq p_t'q_t$$
To define the rationalizability conditions we need the following concepts. We say that $q_t$ is directly revealed preferred to $q_s$ (denoted as $q_tR^Dq_s$) if $p_t'q_t \geq p_t'q_s$. Intuitively, this means that the consumer reveals his preference for $q_t$ over $q_s$ if he purchases $q_t$ when $q_s$ was within the budget. Similarly, we say that $q_t$ is strictly directly revealed preferred to $q_s$ (denoted as $q_tP^Dq_s$) if $p_t'q_t > p_t'q_s$. Next, we say that $q_t$ is revealed preferred to $q_s$ (denoted as $q_tRq_s$) if there exists a sequence of observations $(t,u,v,\cdots,w,s)$ such that $q_t R^D q_v, q_v R^D q_w, \cdots, q_w R^D q_s$. Put differently, $R$ is the transitive closure of $R^D$. 

The core result to verify rationalizability of a data set is through the Generalized axiom of revelaed preference (GARP) introduced by @varian1982nonparametric.

# Installation

You can install the released version of revpref from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("revpref")
```

And the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("ksurana21/revpref")
```
# Example

This example shows you how to use the functions provided within this package. All the functions take as their two main (required) argument $T \times N$  matrices of prices $p$ and quantities $q$. 

```{r example}
# Load
library(revpref)

# Define a price matrix
p = matrix(c(4,4,4,1,9,3,2,8,3,1,8,4,3,1,9,3,2,8,8,4,1,4,1,8,9,3,1,8,3,2),
           nrow = 10, ncol = 3, byrow = TRUE)
print(p)

# Define a quantity matrix
q = matrix(c( 1.81,0.19,10.51,17.28,2.26,4.13,12.33,2.05,2.99,6.06,5.19,
              0.62,11.34,10.33,0.63,4.33,8.08,2.61,4.36,1.34, 9.76,1.37,36.35,
              1.02,3.21,4.97,6.20,0.32,8.53,10.92), nrow = 10, ncol = 3, byrow = TRUE)
print(q)

# Test consistency with WARP and compute the number of WARP violations
warp(p,q)

# Test consistency with SARP and compute the number of SARP violations
sarp(p,q)

# Test consistency with GARP and compute the number of GARP violations
garp(p,q)

# Compute the Critical Cost Efficiency Index (CCEI)
ccei(p,q)

# Compute bounds on the Money Pump Index (MPI)
mpi(p,q)

# Compute Bronars power index
bronars(p,q,1000)

```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/master/examples>.

